import{a as w,t as y}from"../chunks/disclose-version.DQQRdUAa.js";import{i as Q}from"../chunks/legacy.Dr51Qfa9.js";import{p as V,P as x,a as W,Q as r,R as e,S as o,T as a,V as X,W as Y,X as p,Y as v}from"../chunks/index-client.CkyIVMoC.js";import{s as f}from"../chunks/render.DhVwgZeF.js";import{i as q}from"../chunks/if.CZCnw03x.js";import{s as G,r as H}from"../chunks/attributes.BkrXL9RM.js";import{p as K,s as M}from"../chunks/event-modifiers.c_iviAJM.js";import{e as Z}from"../chunks/events.D2Ve-FW0.js";import"../chunks/entry.BTUas84c.js";/* empty css                          */import{P as ee}from"../chunks/public.CvinrDOk.js";var ae=y('<div class="notification is-danger"> </div>'),te=y('<div class="card"><div class="has-text-centered mt-4 svelte-14orvct"><p> </p> <p> </p> <p> </p></div></div> <div class="has-text-centered mt-4 svelte-14orvct"><a href="/login" class="has-text-grey">Login</a></div>',1),se=y('<div class="section"><div class="container"><div class="columns is-centered"><div class="column is-half"><div class="box svelte-14orvct"><h1 class="title has-text-centered svelte-14orvct">Create User</h1> <!> <form><div class="field svelte-14orvct"><label class="label" for="username">Username</label> <div class="control"><input class="input" type="text" name="username" id="username" placeholder="user" required></div></div> <div class="field svelte-14orvct"><label class="label" for="name">Password</label> <div class="control"><input class="input" type="password" name="password" id="password" placeholder="John Doe" required></div></div> <div class="field svelte-14orvct"><label class="label" for="token">Organization Token</label> <div class="control"><input class="input" type="text" name="token" id="token" placeholder="looong string" required></div></div> <div class="field mt-5 svelte-14orvct"><div class="control"><button type="submit">Create User</button></div></div></form></div> <!></div></div></div></div>');function ue(J,L){V(L,!1);let c=p(!1),m=p(""),k=p(!1),d=p(null);async function E(s){v(c,!0),v(m,"");try{const t=s.target,i=new FormData(t),l=await fetch(`${ee}/users`,{method:"POST",body:JSON.stringify({username:i.get("username"),password:i.get("password"),token:i.get("token")}),headers:{"Content-Type":"application/json"}});if(!l.ok){const n=await l.json();throw new Error(JSON.stringify(n.detail)||"Failed to create user")}v(d,await l.json()),v(k,!0),localStorage.setItem("created_user_email",r(d).email)}catch(t){v(m,t.message)}finally{v(c,!1)}}Q();var u=se(),U=e(u),P=e(U),S=e(P),_=e(S),C=o(e(_),2);{var F=s=>{var t=ae(),i=e(t,!0);a(t),x(()=>f(i,r(m))),w(s,t)};q(C,s=>{r(m)&&s(F)})}var g=o(C,2),h=o(e(g),4),D=o(e(h),2),I=e(D);H(I),G(I,localStorage.getItem("org_token")||""),a(D),a(h);var $=o(h,2),O=e($),T=e(O);a(O),a($),a(g),a(_);var N=o(_,2);{var R=s=>{var t=te(),i=X(t),l=e(i),n=e(l),z=e(n);a(n);var b=o(n,2),A=e(b);a(b);var j=o(b,2),B=e(j);a(j),a(l),a(i),Y(2),x(()=>{f(z,`User ID: ${r(d).id??""}`),f(A,`Email: ${r(d).email??""}`),f(B,`Password: ${r(d).password??""}`)}),w(s,t)};q(N,s=>{r(k)&&s(R)})}a(S),a(P),a(U),a(u),x(()=>{M(T,`button is-primary is-fullwidth ${(r(c)?"is-loading":"")??""} svelte-14orvct`),T.disabled=r(c)}),Z("submit",g,K(E)),w(J,u),W()}export{ue as component};
