import{a as l,t as v}from"../chunks/disclose-version.DQQRdUAa.js";import{i as at}from"../chunks/legacy.Dr51Qfa9.js";import{p as et,o as st,a as it,Q as i,Y as n,X as u,R as s,S as r,T as e,P as z}from"../chunks/index-client.CkyIVMoC.js";import{s as A}from"../chunks/render.DhVwgZeF.js";import{i as B}from"../chunks/if.CZCnw03x.js";import{e as ot,i as rt}from"../chunks/each.Bprm_hSX.js";import{r as E,a as nt}from"../chunks/attributes.BkrXL9RM.js";import{e as J}from"../chunks/events.D2Ve-FW0.js";import{b as L}from"../chunks/input.CWxUdYbV.js";import{P as R}from"../chunks/public.CvinrDOk.js";/* empty css                          */var ct=v('<li class="svelte-tp0xxy"><a class="is-size-5"> </a></li>'),lt=v('<div class="content"><ul class="svelte-tp0xxy"></ul></div>'),vt=v('<p class="has-text-grey">No documents found.</p>'),dt=v('<div class="notification is-danger"> </div>'),ut=v('<div class="section"><div class="container"><h1 class="title">Dashboard</h1> <div class="box svelte-tp0xxy"><div class="field has-addons"><div class="control is-expanded"><input class="input" type="text" placeholder="Search documents..."></div> <div class="control"><button class="button is-primary">Search</button></div></div></div> <div class="box svelte-tp0xxy"><h2 class="title is-4">Create New Document</h2> <div class="field"><div class="control"><input class="input" placeholder="Document Title"></div></div> <div class="field"><div class="control"><button class="button is-primary">Create Document</button></div></div></div> <div class="box svelte-tp0xxy"><h2 class="title is-4">Documents</h2> <!></div> <!></div></div>');function Dt(U,$){et($,!1);let d=u(""),m=u([]),c=u(null),p=u(""),q="";st(async()=>{await f()});async function f(){try{const t=new URLSearchParams;i(d)&&t.append("query",i(d));const a=await fetch(`${R}/documents?`+t.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok){const o=await a.json();throw new Error(JSON.stringify(o.detail)||"Failed to search for documents")}n(m,await a.json())}catch(t){n(c,t.message)}}async function F(){await f()}async function Q(t){try{const a=await fetch(`${R}/documents`,{method:"POST",body:JSON.stringify({title:t,content:""}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok){const o=await a.json();throw new Error(JSON.stringify(o.detail)||"Failed to create document")}return await a.json()}catch(a){throw n(c,a.message),a}}async function G(){try{await Q(i(p),q),await f()}catch(t){n(c,t.message)}}at();var h=ut(),D=s(h),_=r(s(D),2),k=s(_),y=s(k),C=s(y);E(C),e(y);var P=r(y,2),M=s(P);e(P),e(k),e(_);var x=r(_,2),b=r(s(x),2),T=s(b),j=s(T);E(j),e(T),e(b);var N=r(b,2),I=s(N),X=s(I);e(I),e(N),e(x);var w=r(x,2),Y=r(s(w),2);{var H=t=>{var a=lt(),o=s(a);ot(o,5,()=>i(m),rt,(Z,O)=>{var g=ct(),S=s(g),tt=s(S,!0);e(S),e(g),z(()=>{nt(S,"href",`/document/${i(O).id}`),A(tt,i(O).title)}),l(Z,g)}),e(o),e(a),l(t,a)},K=t=>{var a=vt();l(t,a)};B(Y,t=>{i(m).length>0?t(H):t(K,!1)})}e(w);var V=r(w,2);{var W=t=>{var a=dt(),o=s(a,!0);e(a),z(()=>A(o,i(c))),l(t,a)};B(V,t=>{i(c)&&t(W)})}e(D),e(h),L(C,()=>i(d),t=>n(d,t)),J("click",M,F),L(j,()=>i(p),t=>n(p,t)),J("click",X,G),l(U,h),it()}export{Dt as component};
