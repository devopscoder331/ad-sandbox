import{a as x,t as z}from"../chunks/disclose-version.DQQRdUAa.js";import{i as Q}from"../chunks/legacy.Dr51Qfa9.js";import{p as W,P as y,a as X,Q as s,R as t,S as o,T as a,W as j,X as p,Y as d}from"../chunks/index-client.CkyIVMoC.js";import{s as f}from"../chunks/render.DhVwgZeF.js";import{i as B}from"../chunks/if.CZCnw03x.js";import{e as Y}from"../chunks/events.D2Ve-FW0.js";import{p as G,s as H}from"../chunks/event-modifiers.c_iviAJM.js";import"../chunks/entry.BTUas84c.js";/* empty css                          */import{P as K}from"../chunks/public.CvinrDOk.js";var M=z('<div class="notification is-danger"> </div>'),V=z(`<div class="card mt-4 svelte-14orvct"><div class="card-content"><div class="content"><h2 class="subtitle has-text-centered">Organization Created!</h2> <div class="notification is-info is-light"><p><strong>Organization ID:</strong> </p> <p><strong>Domain:</strong> </p> <p class="has-text-weight-bold"> </p> <p class="help has-text-danger">Please save this token - you'll need it to create users for your organization.</p></div></div></div></div>`),Z=z(`<div class="section"><div class="container"><div class="columns is-centered"><div class="column is-half"><div class="card"><div class="card-content"><h1 class="title has-text-centered svelte-14orvct">Create Organization</h1> <!> <form><div class="field svelte-14orvct"><label class="label" for="domain">Domain</label> <div class="control"><input class="input" type="text" name="domain" id="domain" placeholder="example.com" required></div> <p class="help">Enter your organization's domain name</p></div> <div class="field mt-5 svelte-14orvct"><div class="control"><button type="submit">Create Organization</button></div></div></form></div></div> <!> <div class="has-text-centered mt-4 svelte-14orvct"><a href="/organizations" class="button is-light">Back to Organizations</a></div></div></div></div></div>`);function lt(E,F){W(F,!1);let c=p(!1),m=p(""),O=p(!1),v=p(null);async function J(i){d(c,!0),d(m,"");try{const e=i.target,r=new FormData(e),l=await fetch(`${K}/organizations`,{method:"POST",body:JSON.stringify({domain:r.get("domain")}),headers:{"Content-Type":"application/json"}}),n=await l.json();if(!l.ok)throw new Error(JSON.stringify(n.detail)||"Failed to create organization");d(v,n),d(O,!0),localStorage.setItem("org_token",n.token)}catch(e){d(m,e.message)}finally{d(c,!1)}}Q();var g=Z(),k=t(g),w=t(k),C=t(w),_=t(C),D=t(_),P=o(t(D),2);{var L=i=>{var e=M(),r=t(e,!0);a(e),y(()=>f(r,s(m))),x(i,e)};B(P,i=>{s(m)&&i(L)})}var h=o(P,2),S=o(t(h),2),$=t(S),I=t($);a($),a(S),a(h),a(D),a(_);var N=o(_,2);{var R=i=>{var e=V(),r=t(e),l=t(r),n=o(t(l),2),u=t(n),U=o(t(u));a(u);var b=o(u,2),q=o(t(b));a(b);var T=o(b,2),A=t(T);a(T),j(2),a(n),a(l),a(r),a(e),y(()=>{f(U,` ${s(v).id??""}`),f(q,` ${s(v).domain??""}`),f(A,`Token: ${s(v).token??""}`)}),x(i,e)};B(N,i=>{s(O)&&s(v)&&i(R)})}j(2),a(C),a(w),a(k),a(g),y(()=>{H(I,`button is-primary is-fullwidth ${(s(c)?"is-loading":"")??""} svelte-14orvct`),I.disabled=s(c)}),Y("submit",h,G(J)),x(E,g),X()}export{lt as component};
