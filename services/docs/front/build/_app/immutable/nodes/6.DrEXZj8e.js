import{a as I,t as j}from"../chunks/disclose-version.DQQRdUAa.js";import{i as F}from"../chunks/legacy.Dr51Qfa9.js";import{p as J,o as N,P as L,a as R,Y as i,Q as o,X as f,R as a,S as v,T as t}from"../chunks/index-client.CkyIVMoC.js";import{s as U}from"../chunks/render.DhVwgZeF.js";import{i as $}from"../chunks/if.CZCnw03x.js";import{r as A,s as B}from"../chunks/attributes.BkrXL9RM.js";import{p as M,s as Q}from"../chunks/event-modifiers.c_iviAJM.js";import{e as V}from"../chunks/events.D2Ve-FW0.js";import{g as X}from"../chunks/entry.BTUas84c.js";/* empty css                          */import{P as Y}from"../chunks/public.CvinrDOk.js";var z=j('<div class="notification is-danger"> </div>'),G=j('<div class="section"><div class="container"><div class="columns is-centered"><div class="column is-half"><div class="box svelte-14orvct"><h1 class="title has-text-centered svelte-14orvct">Login</h1> <!> <form><div class="field svelte-14orvct"><label class="label" for="email">Email</label> <div class="control"><input class="input" type="email" name="email" id="email" placeholder="user@example.com" required></div></div> <div class="field svelte-14orvct"><label class="label" for="password">Password</label> <div class="control"><input class="input" type="password" name="password" id="password" required></div></div> <div class="field mt-5 svelte-14orvct"><div class="control"><button type="submit">Login</button></div></div></form></div></div></div></div></div>');function la(D,O){J(O,!1);let r=f(!1),l=f(""),u=f("");N(()=>{i(u,localStorage.getItem("created_user_email")||"")});async function T(s){i(r,!0),i(l,"");try{const e=s.target,d=new FormData(e),p=await fetch(`${Y}/login`,{method:"POST",body:JSON.stringify({email:d.get("email"),password:d.get("password")}),headers:{"Content-Type":"application/json"}});if(!p.ok){const E=await p.json();throw new Error(JSON.stringify(E.detail)||"Failed to login")}const C=await p.json();localStorage.setItem("token",C.token),await X("/dashboard")}catch(e){i(l,e.message)}finally{i(r,!1)}}F();var n=G(),_=a(n),g=a(_),b=a(g),h=a(b),w=v(a(h),2);{var q=s=>{var e=z(),d=a(e,!0);t(e),L(()=>U(d,o(l))),I(s,e)};$(w,s=>{o(l)&&s(q)})}var m=v(w,2),c=a(m),y=v(a(c),2),S=a(y);A(S),t(y),t(c);var x=v(c,4),P=a(x),k=a(P);t(P),t(x),t(m),t(h),t(b),t(g),t(_),t(n),L(()=>{B(S,o(u)),Q(k,`button is-primary is-fullwidth ${(o(r)?"is-loading":"")??""} svelte-14orvct`),k.disabled=o(r)}),V("submit",m,M(T)),I(D,n),R()}export{la as component};
